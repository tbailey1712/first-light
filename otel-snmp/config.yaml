receivers:
  prometheus:
    config:
      scrape_configs:
        # SNMP exporter self-metrics
        - job_name: 'snmp-exporter'
          scrape_interval: 60s
          static_configs:
            - targets: ['fl-snmp-exporter:9116']

        # SNMP switch - use query params in URL
        - job_name: 'snmp-switch'
          scrape_interval: 60s
          scrape_timeout: 30s
          metrics_path: /snmp
          params:
            module: [if_mib]
            target: [192.168.1.2]
          static_configs:
            - targets:
              - fl-snmp-exporter:9116
          metric_relabel_configs:
            - source_labels: []
              target_label: instance
              replacement: '192.168.1.2'
            - source_labels: []
              target_label: device
              replacement: 'switch.mcducklabs.com'

        # SNMP pfSense
        - job_name: 'snmp-pfsense'
          scrape_interval: 60s
          scrape_timeout: 30s
          metrics_path: /snmp
          params:
            module: [if_mib]
            target: [192.168.1.1]
          static_configs:
            - targets:
              - fl-snmp-exporter:9116
          metric_relabel_configs:
            - source_labels: []
              target_label: instance
              replacement: '192.168.1.1'
            - source_labels: []
              target_label: device
              replacement: 'pfsense.mcducklabs.com'

        # SNMP QNAP
        - job_name: 'snmp-qnap'
          scrape_interval: 60s
          scrape_timeout: 30s
          metrics_path: /snmp
          params:
            module: [if_mib]
            target: [192.168.2.9]
          static_configs:
            - targets:
              - fl-snmp-exporter:9116
          metric_relabel_configs:
            - source_labels: []
              target_label: instance
              replacement: '192.168.2.9'
            - source_labels: []
              target_label: device
              replacement: 'nas.mcducklabs.com'

        # SNMP Proxmox
        - job_name: 'snmp-proxmox'
          scrape_interval: 60s
          scrape_timeout: 30s
          metrics_path: /snmp
          params:
            module: [if_mib]
            target: [192.168.1.89]
          static_configs:
            - targets:
              - fl-snmp-exporter:9116
          metric_relabel_configs:
            - source_labels: []
              target_label: instance
              replacement: '192.168.1.89'
            - source_labels: []
              target_label: device
              replacement: 'pve.mcducklabs.com'

exporters:
  otlp:
    endpoint: signoz-otel-collector:4317
    tls:
      insecure: true

processors:
  batch:
    timeout: 10s

service:
  telemetry:
    logs:
      level: info
  pipelines:
    metrics:
      receivers: [prometheus]
      processors: [batch]
      exporters: [otlp]
