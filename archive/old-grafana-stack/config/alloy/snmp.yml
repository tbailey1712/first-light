# SNMP Exporter configuration for First Light
# Modules for switch (IF-MIB) and NAS (HOST-RESOURCES-MIB)

auths:
  # SNMPv2c for switch
  switch:
    community: public
    security_level: noAuthNoPriv
    version: 2

  # SNMPv3 noAuthNoPriv for QNAP NAS
  nas_v3:
    username: snmp
    security_level: noAuthNoPriv
    version: 3

modules:
  # Standard interface MIB â€” works for any managed switch
  if_mib:
    walk:
      - 1.3.6.1.2.1.2       # interfaces
      - 1.3.6.1.2.1.31.1.1  # ifXTable (64-bit counters)
      - 1.3.6.1.2.1.1        # system
    metrics:
      - name: ifOperStatus
        oid: 1.3.6.1.2.1.2.2.1.8
        type: gauge
        help: Current operational state of the interface
        indexes:
          - labelname: ifIndex
            type: gauge
        lookups:
          - labels: [ifIndex]
            labelname: ifDescr
            oid: 1.3.6.1.2.1.2.2.1.2
            type: DisplayString
      - name: ifHCInOctets
        oid: 1.3.6.1.2.1.31.1.1.1.6
        type: counter
        help: Total bytes received on interface (64-bit)
        indexes:
          - labelname: ifIndex
            type: gauge
        lookups:
          - labels: [ifIndex]
            labelname: ifDescr
            oid: 1.3.6.1.2.1.2.2.1.2
            type: DisplayString
          - labels: [ifIndex]
            labelname: ifAlias
            oid: 1.3.6.1.2.1.31.1.1.1.18
            type: DisplayString
      - name: ifHCOutOctets
        oid: 1.3.6.1.2.1.31.1.1.1.10
        type: counter
        help: Total bytes sent on interface (64-bit)
        indexes:
          - labelname: ifIndex
            type: gauge
        lookups:
          - labels: [ifIndex]
            labelname: ifDescr
            oid: 1.3.6.1.2.1.2.2.1.2
            type: DisplayString
          - labels: [ifIndex]
            labelname: ifAlias
            oid: 1.3.6.1.2.1.31.1.1.1.18
            type: DisplayString
      - name: ifInErrors
        oid: 1.3.6.1.2.1.2.2.1.14
        type: counter
        help: Number of inbound packets with errors
        indexes:
          - labelname: ifIndex
            type: gauge
        lookups:
          - labels: [ifIndex]
            labelname: ifDescr
            oid: 1.3.6.1.2.1.2.2.1.2
            type: DisplayString
      - name: ifOutErrors
        oid: 1.3.6.1.2.1.2.2.1.20
        type: counter
        help: Number of outbound packets with errors
        indexes:
          - labelname: ifIndex
            type: gauge
        lookups:
          - labels: [ifIndex]
            labelname: ifDescr
            oid: 1.3.6.1.2.1.2.2.1.2
            type: DisplayString

  # NAS monitoring via HOST-RESOURCES-MIB + IF-MIB
  nas_host:
    walk:
      - 1.3.6.1.2.1.25.2    # hrStorage (disk usage)
      - 1.3.6.1.2.1.25.3    # hrDevice (processors, disk)
      - 1.3.6.1.2.1.2        # interfaces
      - 1.3.6.1.2.1.31.1.1  # ifXTable
      - 1.3.6.1.2.1.1        # system
    metrics:
      - name: hrStorageUsed
        oid: 1.3.6.1.2.1.25.2.3.1.6
        type: gauge
        help: Storage units used
        indexes:
          - labelname: hrStorageIndex
            type: gauge
        lookups:
          - labels: [hrStorageIndex]
            labelname: hrStorageDescr
            oid: 1.3.6.1.2.1.25.2.3.1.3
            type: DisplayString
      - name: hrStorageSize
        oid: 1.3.6.1.2.1.25.2.3.1.5
        type: gauge
        help: Total storage units available
        indexes:
          - labelname: hrStorageIndex
            type: gauge
        lookups:
          - labels: [hrStorageIndex]
            labelname: hrStorageDescr
            oid: 1.3.6.1.2.1.25.2.3.1.3
            type: DisplayString
      - name: hrStorageAllocationUnits
        oid: 1.3.6.1.2.1.25.2.3.1.4
        type: gauge
        help: Bytes per storage allocation unit
        indexes:
          - labelname: hrStorageIndex
            type: gauge
      - name: hrProcessorLoad
        oid: 1.3.6.1.2.1.25.3.3.1.2
        type: gauge
        help: CPU utilization percentage
        indexes:
          - labelname: hrDeviceIndex
            type: gauge
